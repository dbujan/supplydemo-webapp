(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{208:function(t,e,r){"use strict";r.r(e);r(84),r(20),r(21),r(10),r(67);var n=r(60),o=r(46),c=r(40),l=r.n(c);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var v={data:function(){return{id:"",password:"",loading:!1,error:!1,wrongU:!1,isM:!1,isP:!1,isC:!1,isD:!1}},asyncData:function(t){t.app,t.params;var e=t.store;return l.a.get(e.state.settings.api+"/Producer").then((function(t){return l.a.get(e.state.settings.api+"/Manufacturer").then((function(r){return Array.prototype.push.apply(t.data,r.data),l.a.get(e.state.settings.api+"/Courier").then((function(r){return Array.prototype.push.apply(t.data,r.data),l.a.get(e.state.settings.api+"/Client").then((function(e){return Array.prototype.push.apply(t.data,e.data),{users:t.data}}))}))}))}))},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(o.b)({api:function(t){return t.settings.api}})),methods:{producerExist:function(){var t=this.id,e=!1;return this.users.filter((function(r){return r.holderId===t&&(e=!0,!0)})),e},manufacturerExist:function(){var t=this.id,e=!1;return this.users.filter((function(r){return r.holderId===t&&(e=!0,!0)})),e},courierExist:function(){var t=this.id,e=!1;return this.users.filter((function(r){return r.holderId===t&&(e=!0,!0)})),e},clientExist:function(){var t=this.id,e=!1;return this.users.filter((function(r){return r.holderId===t&&(e=!0,!0)})),e},storeId:function(){this.wrongU=!1,this.producerExist()||this.manufacturerExist()||this.courierExist()||this.clientExist()?(this.$user.copy({name:this.id}),this.isM="M"===this.id.charAt(0),this.isP="P"===this.id.charAt(0),this.isC="C"===this.id.charAt(0),this.isD="D"===this.id.charAt(0)):(this.error=!0,this.loading=!1,this.wrongU=!0,this.$user.copy({name:""}))},updateApi:function(t){this.$store.commit("settings/update",t.target.value),this.storeId()},manualUpdate:function(path){var t=this;this.$store.commit("settings/update",path),l.a.get(this.$store.state.settings.api+"/Producer").then((function(e){l.a.get(t.$store.state.settings.api+"/Manufacturer").then((function(r){Array.prototype.push.apply(e.data,r.data),l.a.get(t.$store.state.settings.api+"/Courier").then((function(r){Array.prototype.push.apply(e.data,r.data),l.a.get(t.$store.state.settings.api+"/Client").then((function(r){Array.prototype.push.apply(e.data,r.data),t.users=e.data}))}))}))}))},send:function(){if(this.error)this.error=!1;else try{this.loading=!0,this.error=!1}catch(t){console.log(t),this.error=!0,this.loading=!1}}}},h=r(27),component=Object(h.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container mx-auto p-4"},[t._m(0),t._v(" "),""!=t.id&&""!=t.password&&t.loading?t._e():r("div",[r("form",{staticClass:"mt-4",on:{submit:function(e){return e.preventDefault(),t.send(e)}}},[r("label",{staticClass:"block"},[r("span",{staticClass:"text-gray-700"},[t._v("Identificativo")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.id,expression:"id"}],staticClass:"form-input mt-1 block w-full",attrs:{placeholder:"M1",required:"",disabled:t.loading},domProps:{value:t.id},on:{input:function(e){e.target.composing||(t.id=e.target.value)}}})]),t._v(" "),r("label",{staticClass:"block pt-2"},[r("span",{staticClass:"text-gray-700"},[t._v("Contraseña")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-input mt-1 block w-full",attrs:{placeholder:"1234",required:"",disabled:t.loading},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),t.loading?t._e():r("button",{staticClass:"mt-3 bg-blue-400 text-white py-2 px-3 rounded",attrs:{required:""},on:{click:t.storeId}},[t._v("Iniciar sesión")]),t._v(" "),t.loading?r("button",{staticClass:"mt-3 bg-blue-200 text-black py-2 px-3 rounded",attrs:{disabled:"",required:""}},[t._v("Enviando datos...")]):t._e(),t._v(" "),t.error?r("p",{staticClass:"text-red-600"},[t._v("Ha ocurrido un error. Inténtelo de nuevo más tarde.")]):t._e(),t._v(" "),t.wrongU?r("p",{staticClass:"text-red-600"},[t._v("Usuario incorrecto, introduzca un usuario existente.")]):t._e()])]),t._v(" "),""!=t.id&&""!=t.password&&t.loading?r("div",[t.isP?r("div",{staticClass:"mt-4"},[r("nuxt-link",{staticClass:"bg-gray-200 p-4 rounded block",attrs:{to:"/component/new"}},[r("h2",{staticClass:"font"},[t._v("Nuevo componente")])])],1):t._e(),t._v(" "),t.isM?r("div",{staticClass:"mt-4"},[r("nuxt-link",{staticClass:"bg-gray-200 p-4 rounded block",attrs:{to:"/product/new"}},[r("h2",{staticClass:"font"},[t._v("Nuevo producto")])])],1):t._e(),t._v(" "),t.isP?r("div",{staticClass:"mt-4"},[r("nuxt-link",{staticClass:"bg-gray-200 p-4 rounded block",attrs:{to:"/component/"}},[r("h2",{staticClass:"font"},[t._v("Ver componentes")])])],1):t._e(),t._v(" "),t.isM?r("div",{staticClass:"mt-4"},[r("nuxt-link",{staticClass:"bg-gray-200 p-4 rounded block",attrs:{to:"/product/"}},[r("h2",{staticClass:"font"},[t._v("Ver productos")])])],1):t._e(),t._v(" "),t.isC?r("div",{staticClass:"mt-4"},[r("nuxt-link",{staticClass:"bg-gray-200 p-4 rounded block",attrs:{to:"/courier/"}},[r("h2",{staticClass:"font"},[t._v("Marcar pasos de paquetes")])])],1):t._e(),t._v(" "),t.isD?r("div",{staticClass:"mt-4"},[r("nuxt-link",{staticClass:"bg-gray-200 p-4 rounded block",attrs:{to:"/client/"}},[r("h2",{staticClass:"font"},[t._v("Recepcionar paquete")])])],1):t._e(),t._v(" "),t.isD?r("div",{staticClass:"mt-4"},[r("nuxt-link",{staticClass:"bg-gray-200 p-4 rounded block",attrs:{to:"/client/view"}},[r("h2",{staticClass:"font"},[t._v("Ver traza de paquete")])])],1):t._e(),t._v(" "),r("button",{staticClass:"mt-3 text-black py-2 px-3 rounded",attrs:{required:""},on:{click:function(e){t.id="",t.password="",t.loading=!1}}},[t._v("Atrás")])]):t._e(),t._v(" "),r("div",{staticClass:"mt-4"},[r("h2",{staticClass:"text-lg font-semibold"},[t._v("Ajustes")]),t._v(" "),r("label",{staticClass:"block"},[r("span",{staticClass:"text-gray-700"},[t._v("Ruta API. No incluir / al final.")]),t._v(" "),r("input",{staticClass:"form-input mt-1 block w-full",domProps:{value:t.api},on:{input:t.updateApi}}),t._v(" "),r("span",{staticClass:"text-gray-600"},[r("a",{staticClass:"cursor-pointer underline",on:{click:function(e){return e.preventDefault(),t.manualUpdate("http://172.24.16.11/api")}}},[t._v("Deusto IP interna")]),t._v(" "),r("a",{staticClass:"cursor-pointer underline",on:{click:function(e){return e.preventDefault(),t.manualUpdate("http://130.206.138.65/api")}}},[t._v("Deusto IP externa")]),t._v(" "),r("a",{staticClass:"cursor-pointer underline",on:{click:function(e){return e.preventDefault(),t.manualUpdate("http://192.168.2.201:3000/api")}}},[t._v("Vagrant")])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h1",{staticClass:"text-2xl font-semibold"},[this._v("Prototipo supplychain")]),this._v(" "),e("p",{staticClass:"text-sm"},[this._v("Vistas de ejemplo según rol")])])}],!1,null,null,null);e.default=component.exports}}]);