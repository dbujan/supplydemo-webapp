(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{206:function(t,e,o){"use strict";o.r(e);o(14);var l=o(40),n=o.n(l),r={data:function(){return{id:"",location:"",desc:"",weight:"",volume:"",dimension:"",sensor:"",generalData:"",loading:!1,error:!1,qr:"",long:"",lat:""}},methods:{getLocation:function(){navigator.geolocation.getCurrentPosition(this.buildCoords,this.geoError)},buildCoords:function(t){this.lat=String(t.coords.latitude),this.long=String(t.coords.longitude)},geoError:function(t){this.lat="0",this.long="0"},send:function(){var t=this;t.loading=!0,t.error=!1,"C"!==t.id.charAt(0)&&"O"!==t.id.charAt(1)?(t.error=!0,t.loading=!1):n.a.post(this.$store.state.settings.api+"/Item",{$class:"es.deusto.supplychain.Item",type:"COMPONENT",itemId:this.id,description:this.desc,status:"IDLE",owner:$user.name,lastLocation:this.location,maker:$user.name,weight:this.weight,volume:this.volume,dimension:this.dimension,sensor1:this.sensor,generalData:this.generalData,long:this.long,lat:this.lat}).then((function(e){console.log(e),t.qr=e.data.$class+"#"+e.data.itemId,t.loading=!1})).catch((function(e){console.log(e),t.error=!0,t.loading=!1}))}}},c=o(27),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container mx-auto p-4"},[t._m(0),t._v(" "),""==t.qr?o("div",[o("form",{staticClass:"mt-4",on:{submit:function(e){return e.preventDefault(),t.send(e)}}},[o("label",{staticClass:"block"},[o("span",{staticClass:"text-gray-700"},[t._v("Identificativo (CO-)")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.id,expression:"id"}],staticClass:"form-input mt-1 block w-full",attrs:{placeholder:"CO1",required:"",disabled:t.loading},domProps:{value:t.id},on:{input:function(e){e.target.composing||(t.id=e.target.value)}}})]),t._v(" "),o("label",{staticClass:"block pt-2"},[o("span",{staticClass:"text-gray-700"},[t._v("Ubicación")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.location,expression:"location"}],staticClass:"form-input mt-1 block w-full",attrs:{placeholder:"L1",required:"",disabled:t.loading},domProps:{value:t.location},on:{input:function(e){e.target.composing||(t.location=e.target.value)}}})]),t._v(" "),o("flex-row",{attrs:{tag:"section"}},[o("label",{staticClass:"block pt-2"},[o("span",{staticClass:"text-gray-700"},[t._v("Peso")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.weight,expression:"weight"}],staticClass:"form-input mt-1 block w-full",attrs:{placeholder:"5kg",required:"",disabled:t.loading},domProps:{value:t.weight},on:{input:function(e){e.target.composing||(t.weight=e.target.value)}}})]),t._v(" "),o("label",{staticClass:"block pt-2"},[o("span",{staticClass:"text-gray-700"},[t._v("Volumen")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.volume,expression:"volume"}],staticClass:"form-input mt-1 block w-full",attrs:{placeholder:"100cm^3",required:"",disabled:t.loading},domProps:{value:t.volume},on:{input:function(e){e.target.composing||(t.volume=e.target.value)}}})]),t._v(" "),o("label",{staticClass:"block pt-2"},[o("span",{staticClass:"text-gray-700"},[t._v("Dimensiones")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.dimension,expression:"dimension"}],staticClass:"form-input mt-1 block w-full",attrs:{placeholder:"LargoAnchoAlto",required:"",disabled:t.loading},domProps:{value:t.dimension},on:{input:function(e){e.target.composing||(t.dimension=e.target.value)}}})])]),t._v(" "),o("label",{staticClass:"block pt-2"},[o("span",{staticClass:"text-gray-700"},[t._v("Descripción")]),t._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.desc,expression:"desc"}],staticClass:"form-textarea mt-1 block w-full",attrs:{rows:"3",placeholder:"Introduce una descripción.",required:"",disabled:t.loading},domProps:{value:t.desc},on:{input:function(e){e.target.composing||(t.desc=e.target.value)}}})]),t._v(" "),o("label",{staticClass:"block pt-2"},[o("span",{staticClass:"text-gray-700"},[t._v("Información general")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.generalData,expression:"generalData"}],staticClass:"form-input mt-1 block w-full",attrs:{placeholder:"Información general",required:"",disabled:t.loading},domProps:{value:t.generalData},on:{input:function(e){e.target.composing||(t.generalData=e.target.value)}}})]),t._v(" "),o("label",{staticClass:"block pt-2"},[o("span",{staticClass:"text-gray-700"},[t._v("Sensor")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.sensor,expression:"sensor"}],staticClass:"form-input mt-1 block w-full",attrs:{placeholder:"Datos del sensor",required:"",disabled:t.loading},domProps:{value:t.sensor},on:{input:function(e){e.target.composing||(t.sensor=e.target.value)}}})]),t._v(" "),o("button",{staticClass:"mt-3 bg-blue-200 text-black py-2 px-3 rounded",on:{click:t.getLocation}},[t._v("Get location")]),t._v(" "),o("label",{staticClass:"block pt-2"},[o("span",{staticClass:"text-gray-700"},[t._v("Longitud")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.long,expression:"long"}],staticClass:"form-input mt-1 block w-full",attrs:{placeholder:"0",required:"",disabled:t.loading},domProps:{value:t.long},on:{input:function(e){e.target.composing||(t.long=e.target.value)}}})]),t._v(" "),o("label",{staticClass:"block pt-2"},[o("span",{staticClass:"text-gray-700"},[t._v("Latitud")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.lat,expression:"lat"}],staticClass:"form-input mt-1 block w-full",attrs:{placeholder:"0",required:"",disabled:t.loading},domProps:{value:t.lat},on:{input:function(e){e.target.composing||(t.lat=e.target.value)}}})]),t._v(" "),t.loading?t._e():o("button",{staticClass:"mt-3 bg-blue-400 text-white py-2 px-3 rounded",attrs:{required:""}},[t._v("Registrar")]),t._v(" "),t.loading?o("button",{staticClass:"mt-3 bg-blue-200 text-black py-2 px-3 rounded",attrs:{disabled:"",required:""}},[t._v("Enviando datos...")]):t._e(),t._v(" "),o("nuxt-link",{staticClass:"mt-3 text-black py-2 px-3 rounded",attrs:{to:"/component/"}},[t._v("Cancelar")]),t._v(" "),t.error?o("p",{staticClass:"text-red-600"},[t._v("Ha ocurrido un error. Inténtelo de nuevo más tarde.")]):t._e()],1)]):t._e(),t._v(" "),""!=t.qr?o("div",{staticClass:"mt-4"},[o("h2",{staticClass:"font-semibold"},[t._v("Registro de componente en la Blockchain")]),t._v(" "),o("div",{staticClass:"flex items-center text-green-600"},[o("svg",{staticClass:"fill-current w-4 h-",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[o("path",{attrs:{d:"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM6.7 9.29L9 11.6l4.3-4.3 1.4 1.42L9 14.4l-3.7-3.7 1.4-1.42z"}})]),t._v(" "),t._m(1)]),t._v(" "),o("nuxt-link",{staticClass:"py-2 px-2 bg-gray-200 inline-block text-black mt-3",attrs:{to:"/component/"}},[t._v("Ver componentes")]),t._v(" "),o("qrcode",{attrs:{value:t.qr,options:{tag:"svg"}}}),t._v(" "),o("p",{staticClass:"font-mono text-sm"},[t._v("\n      "+t._s(t.qr)+"\n    ")])],1):t._e()])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h1",{staticClass:"text-2xl font-semibold"},[this._v("Registrar componente")]),this._v(" "),e("p",{staticClass:"text-sm text-gray-800"},[this._v("Un componente sirve para producir uno o varios productos.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ml-2"},[e("h3",{},[this._v("Componente registrado con éxito")])])}],!1,null,null,null);e.default=component.exports}}]);